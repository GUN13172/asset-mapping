# 查询联想功能说明

## 功能概述

为资产查询输入框添加了智能联想提示功能，帮助用户快速输入正确的查询语法。

## 功能特点

### 1. 自动联想提示
- 输入时自动显示匹配的查询语法
- 支持模糊匹配（根据关键词匹配）
- 显示语法示例和说明

### 2. 智能匹配
- 空输入时显示所有可用语法
- 输入关键词时过滤匹配项
- 支持中英文关键词匹配

### 3. 多平台支持
每个平台都有专属的语法提示：
- **Hunter**: 14种查询语法
- **FOFA**: 13种查询语法
- **Quake**: 12种查询语法
- **DayDayMap**: 14种查询语法

### 4. 便捷操作
- 点击联想项自动填入
- 支持追加到现有查询（自动添加连接符）
- 支持 Enter 键快速搜索
- 支持 Shift+Enter 换行

## 使用方法

### 基础使用
1. 在查询输入框中输入关键词
2. 查看下拉的联想提示列表
3. 点击选择需要的语法模板
4. 修改模板中的值进行查询

### 示例

#### Hunter 平台
输入 `domain` 会显示：
- `domain.suffix="baidu.com"` - 搜索域名后缀

输入 `ip` 会显示：
- `ip="220.181.38.148"` - 搜索IP
- `ip.province="北京市"` - 搜索省份
- `ip.city="北京市"` - 搜索城市
- `ip.country="中国"` - 搜索国家

#### FOFA 平台
输入 `title` 会显示：
- `title="登录"` - 搜索网页标题

#### Quake 平台
输入 `port` 会显示：
- `port: 3389` - 搜索端口

#### DayDayMap 平台
输入 `app` 会显示：
- `app:"WordPress"` - 搜索应用

### 组合查询
1. 输入第一个查询条件
2. 选择联想项后自动追加
3. 系统会自动添加正确的连接符：
   - Hunter/FOFA: `&&`
   - Quake/DayDayMap: `AND`

## 支持的查询语法

### Hunter (14种)
1. `domain.suffix="baidu.com"` - 搜索域名后缀
2. `ip="220.181.38.148"` - 搜索IP
3. `web.title="登录"` - 搜索网页标题
4. `header="thinkphp"` - 搜索HTTP头
5. `app.name="ThinkPHP"` - 搜索应用框架
6. `port="3306"` - 搜索端口
7. `status_code="200"` - 搜索状态码
8. `protocol="https"` - 搜索协议
9. `ip.province="北京市"` - 搜索省份
10. `ip.city="北京市"` - 搜索城市
11. `ip.country="中国"` - 搜索国家
12. `web.body="login"` - 搜索网页内容
13. `cert="baidu"` - 搜索证书
14. `banner="nginx"` - 搜索Banner

### FOFA (13种)
1. `domain="baidu.com"` - 搜索域名
2. `ip="1.1.1.1"` - 搜索IP
3. `title="登录"` - 搜索网页标题
4. `header="nginx"` - 搜索HTTP头
5. `server=="Microsoft-IIS/10"` - 搜索服务器
6. `port="6379"` - 搜索端口
7. `protocol="https"` - 搜索协议
8. `country="CN"` - 搜索国家
9. `region="Beijing"` - 搜索地区
10. `city="Beijing"` - 搜索城市
11. `body="login"` - 搜索网页内容
12. `cert="baidu"` - 搜索证书
13. `banner="nginx"` - 搜索Banner

### Quake (12种)
1. `domain: baidu.com` - 搜索域名
2. `ip: "1.1.1.1"` - 搜索IP
3. `title: "登录"` - 搜索网页标题
4. `response: "nginx"` - 搜索响应内容
5. `service: "IIS"` - 搜索服务
6. `port: 3389` - 搜索端口
7. `protocol: "https"` - 搜索协议
8. `country: "China"` - 搜索国家
9. `province: "Beijing"` - 搜索省份
10. `city: "Beijing"` - 搜索城市
11. `cert: "baidu"` - 搜索证书
12. `banner: "nginx"` - 搜索Banner

### DayDayMap (14种)
1. `domain:"baidu.com"` - 搜索域名
2. `ip:"183.201.199.1"` - 搜索IP地址
3. `ip:"183.201.199.0/24"` - 搜索IP段（CIDR）
4. `title:"登录"` - 搜索网页标题
5. `server:"nginx"` - 搜索服务器
6. `app:"WordPress"` - 搜索应用
7. `port:"80"` - 搜索端口
8. `protocol:"https"` - 搜索协议
9. `country:"中国"` - 搜索国家
10. `province:"北京"` - 搜索省份
11. `city:"北京"` - 搜索城市
12. `body:"login"` - 搜索网页内容
13. `cert:"baidu"` - 搜索证书
14. `banner:"nginx"` - 搜索Banner

## 技术实现

### 组件
- 使用 Ant Design 的 `AutoComplete` 组件
- 结合 `Input.TextArea` 实现多行输入

### 核心功能
1. **智能匹配算法**
   - 提取输入的最后一个词
   - 在语法标签和描述中进行模糊匹配
   - 返回匹配度高的结果

2. **自动追加**
   - 检测当前查询是否为空
   - 自动添加平台对应的连接符
   - 保持查询语法的正确性

3. **实时更新**
   - 监听输入变化
   - 动态生成联想列表
   - 平台切换时清空状态

## 快捷键

- **Enter**: 执行搜索
- **Shift+Enter**: 换行（多行输入）
- **↑/↓**: 选择联想项
- **Esc**: 关闭联想列表

## 界面展示

联想列表显示格式：
```
[语法示例]                    [说明]
domain.suffix="baidu.com"     搜索域名后缀
```

- 左侧：蓝色高亮的语法示例
- 右侧：灰色的功能说明

## 优势

1. **提高效率**: 无需记忆复杂的查询语法
2. **减少错误**: 避免语法错误导致的查询失败
3. **学习友好**: 新用户可以快速学习各平台语法
4. **智能提示**: 根据输入内容智能推荐相关语法

## 注意事项

1. 联想提示基于关键词匹配，输入越精确，匹配越准确
2. 不同平台的语法格式不同，切换平台时注意语法差异
3. 选择联想项后，记得修改示例值为实际查询值
4. 组合查询时，系统会自动添加正确的连接符

## 未来改进

1. 支持历史查询记录
2. 支持自定义语法模板
3. 支持语法验证和错误提示
4. 支持更多高级查询语法
5. 支持语法高亮显示
